@model IEnumerable<MEGAPos.Models.CreditSales>

@{
    ViewBag.Title = "Sales Manage";
}
<div>
    <h2>Sales for @Model.Select(x => x.Customer_Name).First()</h2>
</div>

<p>
    @*@Html.ActionLink("Create New", "Create")*@

    DATE: @Model.Select(x => x.SaleDate).First().ToShortDateString()
</p>

<h4>
    @*@Html.ActionLink("Create New", "Create")*@

    CASH IN: @Model.Select(x => x.Cash_In).FirstOrDefault()
</h4>



@switch (Convert.ToInt32(Model.Select(x => x.CusTypeId).First()))
{

    case 2://credit customer
        <table class="table table-striped">
            <tr>
                @*<th>
                        @Html.DisplayNameFor(model => model.SaleDate)
                    </th>*@
                <th>
                    @Html.DisplayNameFor(model => model.Item_Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.QtySold)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.AmountCost)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.AmountPaid)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.AmountBalance)
                </th>
                @*<th>
                    @Html.DisplayNameFor(model => model.AmountTotal)
                </th>*@
                <th>
                    @Html.DisplayNameFor(model => model.Unit_Name)
                </th>
                <th>New Payment</th>
                <th></th>
            </tr>

            @foreach (var item in Model.Where(x => x.CusTypeId == 2))
            {
                using (Html.BeginForm("UpdateCreditSale", "Sales", FormMethod.Post, new { @class = "ui form root", role = "form", @id = item.Id }))
                {
                    <tr>
                        @*<td>
                                @Html.TextBoxFor(modelItem => item.SaleDate, new { @value = item.SaleDate, @placeholder = item.SaleDate, @class = "form-control  rounded", @type = "text" })
                            </td>*@
                        <td>
                            <p class="form-control rounded form-control">@item.Item_Name</p>
                            @*<input class="form-control rounded form-control" width="100" type="text"  id="itemName_" name="ItemName"placeholder=@item.Item_Name  disabled/>*@
                        </td>
                        <td>
                            <input class="form-control rounded form-control" type="text" disabled placeholder=@item.QtySold />
                        </td>
                        <td>
                            <input class="form-control rounded form-control" type="text" disabled placeholder=@item.AmountCost />
                        </td>
                        <td>
                            <input class="form-control rounded form-control" type="text" disabled placeholder=@item.AmountPaid />
                        </td>
                        <td>
                            <input class="form-control rounded form-control" type="text" disabled placeholder=@item.AmountBalance />
                        </td>
                        @*<td>
                                <input class="form-control rounded form-control" type="text" disabled placeholder=@item.AmountTotal />
                            </td>*@
                        <td>
                            <input class="form-control rounded form-control" type="text" disabled placeholder=@item.Unit_Name />
                        </td>
                        <td>
                            <input class="form-control rounded form-control" type="text" id="getNewAmount" name="GetNewAmount"
                                   placeholder="Amount" />
                        </td>
                        <td>
                            <input class="form-control rounded form-control" type="hidden" id="saleheadId" name="GetSaleHeadId"
                                   value="@item.Sales_Header_id" />
                            <input type="submit" value="UPDATE" class="ui button primary" id="updateSale" />
                        </td>
                    </tr>
                }
            }

        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>
                @Html.DisplayName("PAY ALL")
            </td>
            <td>
                <input class="form-control rounded form-control" type="text" placeholder="Total Amout" />
            </td>
            <td>
                <input type="submit" value="UPDATE ALL" class="ui button primary" id="updateSale" />
            </td>
        </tr>

        </table>
        break;
    default:
        <table class="table table-striped">
            <tr>
                @*<th>
                        @Html.DisplayNameFor(model => model.SaleDate)
                    </th>*@
                <th>
                    @Html.DisplayNameFor(model => model.Item_Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.QtySold)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.AmountCost)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.AmountPaid)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.AmountBalance)
                </th>
                @*<th>
                        @Html.DisplayNameFor(model => model.AmountTotal)
                    </th>*@

                <th>
                    @Html.DisplayNameFor(model => model.Unit_Name)
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    @*<td>
                            @Html.TextBoxFor(modelItem => item.SaleDate, new { @value = item.SaleDate, @placeholder = item.SaleDate, @class = "form-control  rounded", @type = "text" })
                        </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.Item_Name, new { @placeholder = item.Item_Name, @class = "form-control  rounded readonly", @type = "text" })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.QtySold, new { @placeholder = item.QtySold, @class = "form-control  rounded readonly", @type = "text" })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.AmountCost, new { @placeholder = item.AmountCost, @class = "form-control  rounded readonly", @type = "text" })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.AmountPaid, new { @placeholder = item.AmountPaid, @class = "form-control  rounded readonly", @type = "text" })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.AmountBalance, new { @placeholder = item.AmountBalance, @class = "form-control  rounded readonly", @type = "text" })
                    </td>
                    @*<td>
                            @Html.DisplayFor(modelItem => item.AmountTotal, new { @placeholder = item.AmountTotal, @class = "form-control  rounded readonly", @type = "text" })
                        </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.Unit_Name, new { @placeholder = item.Unit_Name, @class = "form-control  rounded readonly", @type = "text" })
                    </td>
                    <td>
                        @*@Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })*@
                    </td>
                </tr>


            }


        </table>
        break;
}

<link href="~/Scripts/boo/bootstrap.css" rel="stylesheet" />
<script src="~/Scripts/boo/bootstrap.js"></script>

<script>
    $(document).ready(() => {


    });

    function updateCreditSale() {
        var saleHeaderId = $("#saleheadId").val();
        var itemName_ = this.$("#item_Item_Name").val();

        debugger
    }
</script>