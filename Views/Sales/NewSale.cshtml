
@{
    ViewBag.Title = "New Sale";
}
<link href="~/Content/UI/indexes.css" rel="stylesheet" />
<h2>@ViewBag.Title</h2>
<div class="root cart">
    <div class="cart-action">
        <table class="table table-striped table-responsive">
            <thead class="bg-secondary text-white-50" style="text-align:center; background-color:dimgray;">

            </thead>
            <tbody>
                <tr>
                    <td style="padding:10px;" class="field ui left icon input">
                        <input class="form-control  rounded" type="text" id="getItemname" name="ItemName" 
                               placeholder="ITEM NAME" autocomplete="on" 
                               onchange = "getContents(this.value)" />
                    </td>
              
                    <td style="padding:10px;" class="field ui left icon input">
                        <input class="form-control rounded form-control input-sm NumbersOnly" 
                               type="text" id="getQtyRequested" name="QtyRqstd" placeholder="QUANTITY" 
                               onchange = "getContents(this.value)"/>
                    </td>
                    <td style="padding:10px;" class="field ui left icon input">
                        <input class="form-control rounded form-control" type="text" id="getCostCenter" name="CostCntr" 
                               placeholder="PRICE" onchange = "getContents(this.value)" />
                    </td>
                    <td style="padding:10px;" class="field ui left icon input">
                        <input class="form-control rounded form-control" type="text" id="getCustomer" name="Customer" 
                               placeholder="CUSTOMER" onchange = "getContents(this.value)" />
                    </td>
                    <td class="field ui left icon input">
                        <input type="submit" value="ADD" class="ui button primary" id="addToCartBtn" />
                    </td>
                </tr>
            </tbody>
        </table>

        <hr />

        @using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "ui form root", role = "form" }))
        {

            @Html.AntiForgeryToken()

            <div>
                <table class="table table-striped table-responsive" style="min-width:100%">
                    <thead class="bg-secondary text-white-50">
                        <tr>
                            <th>ITEM NAME</th>
                            <th>QUANTITY</th>
                            <th>PRICE</th>
                            <th>CUSTOMER</th>
                            <th>
                                DELETE
                                <span class="fa fa-trash"></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody id="cartItemsTable"></tbody>
                </table>
            </div>

            <div>
                <input type="submit" value="SAVE" class="ui button success" id="createNoteBtn" />
            </div>
        }
    </div>
</div>

<script>
    $(document).ready(() => {
        //Get Item

    })//End of Document function

    function getItemName(val) {
        var url_ = "/Sales/GetItemName/" + val;

        debugger

        $.ajax({
            url: url_,
            data: { getItemname: val },
            dataType: "json",
            type: "GET",
            error: () => {
                alert("Failed to fetch item!.");
            },
            success: (data) => {
                //gfDrop = document.querySelector("#collectedBill_GFS_CodeId");
                itemName = document.querySelector("#getItemname")

                while (gfDrop.firstChild) {
                    gfDrop.removeChild(gfDrop.firstChild);
                }

                var gfoption = '<option value="' + 0 + '">' +
                    "--Select GFS Codes--" +
                    '</option>';

                $("#collectedBill_GFS_CodeId").append(gfoption);

                $.each(data, (item) => {

                    //console.log(item);
                    var gfoptions = '<option value="' +
                        data[item].id + '">' +
                        data[item].CodeNumber +
                        '</option>';

                    $("#collectedBill_GFS_CodeId").append(gfoptions);
                });
            }

        });
    }
</script>

