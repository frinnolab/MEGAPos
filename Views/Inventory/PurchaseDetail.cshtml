@model MEGAPos.ViewModels.PurchaseViewModel
@{
    ViewBag.Title = "Purchase Detail";
}

<h2>@ViewBag.Title</h2>

<div class="sale-detail">
    <div class="sale-info">

    </div>
    <hr />
    <div class="sale-content">
        <table class="table table-striped table-hover" id="companytable">
            <thead class="bg-dark text-white">
                <tr>
                    <th>
                        DATE
                    </th>
                    <th>
                        ITEM NAME
                    </th>
                    <th>
                        QUANTITY
                    </th>

                    <th>
                        UNIT(s)
                    </th>
                    <th>
                        AMOUNT
                    </th>
                    <th>
                        VENDOR
                    </th>
                    <th>
                        <input type="button" value="Update Stock" class="ui button primary" id="updateStockBtn" />
                    </th>
                    <th>
                        @Html.HiddenFor(modelItem => modelItem.Purchase_Head.id)
                    </th>
                    <th></th>
                    @*<th>
            DELETE
        </th>*@


                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model.Purchase_Details)
                {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.PurchaseDate)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Item_Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Qunatity_In)

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Unit_Name)

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)

                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Vendor_Name)
                    </td>

                    <td>
                        <a href="@Url.Action("purchasesDetails","Inventory",new { id = item.id})">View</a>
                        |
                        <a href="@Url.Action("purchasesDetailsDelete","Inventory",new { id = item.id})">Delete</a>
                    </td>
                </tr>
                }

            </tbody>

        </table>
    </div>
</div>

<link href="~/Scripts/boo/bootstrap.css" rel="stylesheet" />
<script src="~/Scripts/boo/bootstrap.js"></script>
<script src="~/Scripts/boo/bootstrap.bundle.js"></script>

<script>
    $(document).ready(()=>{
        //Update Button
        $("#updateStockBtn").on('click', () => {

            var purchaseHeadId = $("#Purchase_Head_id").val();
            //debugger
            var link = "/Inventory/UpdateStock/" + purchaseHeadId;
            $.ajax({
                url: link,
                data: {
                    id:purchaseHeadId
                },
                type: "post",
                dataType: "json",
                error: () => {
                    alert("Failed to Update Stock!.");
                },
                success: (data) => {
                    debugger
                }
            });
        });
    });
</script>
